"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@lexical+devtools-core@0.35.0_react-dom@19.1.0_react@19.1.0__react@19.1.0";
exports.ids = ["vendor-chunks/@lexical+devtools-core@0.35.0_react-dom@19.1.0_react@19.1.0__react@19.1.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TreeView: () => (/* binding */ TreeView),\n/* harmony export */   generateContent: () => (/* binding */ generateContent),\n/* harmony export */   registerLexicalCommandLogger: () => (/* binding */ registerLexicalCommandLogger),\n/* harmony export */   useLexicalCommandsLog: () => (/* binding */ useLexicalCommandsLog)\n/* harmony export */ });\n/* harmony import */ var _lexical_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lexical/html */ \"(ssr)/./node_modules/.pnpm/@lexical+html@0.35.0/node_modules/@lexical/html/LexicalHtml.dev.mjs\");\n/* harmony import */ var _lexical_link__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lexical/link */ \"(ssr)/./node_modules/.pnpm/@lexical+link@0.35.0/node_modules/@lexical/link/LexicalLink.dev.mjs\");\n/* harmony import */ var _lexical_mark__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lexical/mark */ \"(ssr)/./node_modules/.pnpm/@lexical+mark@0.35.0/node_modules/@lexical/mark/LexicalMark.dev.mjs\");\n/* harmony import */ var _lexical_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lexical/table */ \"(ssr)/./node_modules/.pnpm/@lexical+table@0.35.0/node_modules/@lexical/table/LexicalTable.dev.mjs\");\n/* harmony import */ var lexical__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lexical */ \"(ssr)/./node_modules/.pnpm/lexical@0.35.0/node_modules/lexical/Lexical.dev.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.4.7_@babel+core@7.28.5_@playwright+test@1.56.1_react-dom@19.1.0_react@19.1.0__react@19.1.0_sass@1.77.4/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@15.4.7_@babel+core@7.28.5_@playwright+test@1.56.1_react-dom@19.1.0_react@19.1.0__react@19.1.0_sass@1.77.4/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\n\n\n\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst NON_SINGLE_WIDTH_CHARS_REPLACEMENT = Object.freeze({\n  '\\t': '\\\\t',\n  '\\n': '\\\\n'\n});\nconst NON_SINGLE_WIDTH_CHARS_REGEX = new RegExp(Object.keys(NON_SINGLE_WIDTH_CHARS_REPLACEMENT).join('|'), 'g');\nconst SYMBOLS = Object.freeze({\n  ancestorHasNextSibling: '|',\n  ancestorIsLastChild: ' ',\n  hasNextSibling: '├',\n  isLastChild: '└',\n  selectedChar: '^',\n  selectedLine: '>'\n});\nconst FORMAT_PREDICATES = [node => node.hasFormat('bold') && 'Bold', node => node.hasFormat('code') && 'Code', node => node.hasFormat('italic') && 'Italic', node => node.hasFormat('strikethrough') && 'Strikethrough', node => node.hasFormat('subscript') && 'Subscript', node => node.hasFormat('superscript') && 'Superscript', node => node.hasFormat('underline') && 'Underline', node => node.hasFormat('highlight') && 'Highlight'];\nconst FORMAT_PREDICATES_PARAGRAPH = [node => node.hasTextFormat('bold') && 'Bold', node => node.hasTextFormat('code') && 'Code', node => node.hasTextFormat('italic') && 'Italic', node => node.hasTextFormat('strikethrough') && 'Strikethrough', node => node.hasTextFormat('subscript') && 'Subscript', node => node.hasTextFormat('superscript') && 'Superscript', node => node.hasTextFormat('underline') && 'Underline', node => node.hasTextFormat('highlight') && 'Highlight'];\nconst DETAIL_PREDICATES = [node => node.isDirectionless() && 'Directionless', node => node.isUnmergeable() && 'Unmergeable'];\nconst MODE_PREDICATES = [node => node.isToken() && 'Token', node => node.isSegmented() && 'Segmented'];\nfunction generateContent(editor, commandsLog, exportDOM, customPrintNode, obfuscateText = false) {\n  const editorState = editor.getEditorState();\n  const editorConfig = editor._config;\n  const compositionKey = editor._compositionKey;\n  const editable = editor._editable;\n  if (exportDOM) {\n    let htmlString = '';\n    editorState.read(() => {\n      htmlString = printPrettyHTML((0,_lexical_html__WEBPACK_IMPORTED_MODULE_2__.$generateHtmlFromNodes)(editor));\n    });\n    return htmlString;\n  }\n  let res = ' root\\n';\n  const selectionString = editorState.read(() => {\n    const selection = (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getSelection)();\n    visitTree((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getRoot)(), (node, indent) => {\n      const nodeKey = node.getKey();\n      const nodeKeyDisplay = `(${nodeKey})`;\n      const typeDisplay = node.getType() || '';\n      const isSelected = node.isSelected();\n      res += `${isSelected ? SYMBOLS.selectedLine : ' '} ${indent.join(' ')} ${nodeKeyDisplay} ${typeDisplay} ${printNode(node, customPrintNode, obfuscateText)}\\n`;\n      res += $printSelectedCharsLine({\n        indent,\n        isSelected,\n        node,\n        nodeKeyDisplay,\n        selection,\n        typeDisplay\n      });\n    });\n    return selection === null ? ': null' : (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isRangeSelection)(selection) ? printRangeSelection(selection) : (0,_lexical_table__WEBPACK_IMPORTED_MODULE_4__.$isTableSelection)(selection) ? printTableSelection(selection) : printNodeSelection(selection);\n  });\n  res += '\\n selection' + selectionString;\n  res += '\\n\\n commands:';\n  if (commandsLog.length) {\n    for (const {\n      index,\n      type,\n      payload\n    } of commandsLog) {\n      res += `\\n  └ ${index}. { type: ${type}, payload: ${payload instanceof Event ? payload.constructor.name : payload} }`;\n    }\n  } else {\n    res += '\\n  └ None dispatched.';\n  }\n  const {\n    version\n  } = editor.constructor;\n  res += `\\n\\n editor${version ? ` (v${version})` : ''}:`;\n  res += `\\n  └ namespace ${editorConfig.namespace}`;\n  if (compositionKey !== null) {\n    res += `\\n  └ compositionKey ${compositionKey}`;\n  }\n  res += `\\n  └ editable ${String(editable)}`;\n  return res;\n}\nfunction printRangeSelection(selection) {\n  let res = '';\n  const formatText = printFormatProperties(selection);\n  res += `: range ${formatText !== '' ? `{ ${formatText} }` : ''} ${selection.style !== '' ? `{ style: ${selection.style} } ` : ''}`;\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  const anchorOffset = anchor.offset;\n  const focusOffset = focus.offset;\n  res += `\\n  ├ anchor { key: ${anchor.key}, offset: ${anchorOffset === null ? 'null' : anchorOffset}, type: ${anchor.type} }`;\n  res += `\\n  └ focus { key: ${focus.key}, offset: ${focusOffset === null ? 'null' : focusOffset}, type: ${focus.type} }`;\n  return res;\n}\nfunction printNodeSelection(selection) {\n  if (!(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isNodeSelection)(selection)) {\n    return '';\n  }\n  return `: node\\n  └ [${Array.from(selection._nodes).join(', ')}]`;\n}\nfunction printTableSelection(selection) {\n  return `: table\\n  └ { table: ${selection.tableKey}, anchorCell: ${selection.anchor.key}, focusCell: ${selection.focus.key} }`;\n}\nfunction visitTree(currentNode, visitor, indent = []) {\n  const childNodes = currentNode.getChildren();\n  const childNodesLength = childNodes.length;\n  childNodes.forEach((childNode, i) => {\n    visitor(childNode, indent.concat(i === childNodesLength - 1 ? SYMBOLS.isLastChild : SYMBOLS.hasNextSibling));\n    if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isElementNode)(childNode)) {\n      visitTree(childNode, visitor, indent.concat(i === childNodesLength - 1 ? SYMBOLS.ancestorIsLastChild : SYMBOLS.ancestorHasNextSibling));\n    }\n  });\n}\nfunction normalize(text, obfuscateText = false) {\n  const textToPrint = Object.entries(NON_SINGLE_WIDTH_CHARS_REPLACEMENT).reduce((acc, [key, value]) => acc.replace(new RegExp(key, 'g'), String(value)), text);\n  if (obfuscateText) {\n    return textToPrint.replace(/[^\\s]/g, '*');\n  }\n  return textToPrint;\n}\nfunction printNode(node, customPrintNode, obfuscateText = false) {\n  const customPrint = customPrintNode ? customPrintNode(node, obfuscateText) : undefined;\n  if (customPrint !== undefined && customPrint.length > 0) {\n    return customPrint;\n  }\n  if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isTextNode)(node)) {\n    const text = node.getTextContent();\n    const title = text.length === 0 ? '(empty)' : `\"${normalize(text, obfuscateText)}\"`;\n    const properties = printAllTextNodeProperties(node);\n    return [title, properties.length !== 0 ? `{ ${properties} }` : null].filter(Boolean).join(' ').trim();\n  } else if ((0,_lexical_link__WEBPACK_IMPORTED_MODULE_5__.$isLinkNode)(node)) {\n    const link = node.getURL();\n    const title = link.length === 0 ? '(empty)' : `\"${normalize(link, obfuscateText)}\"`;\n    const properties = printAllLinkNodeProperties(node);\n    return [title, properties.length !== 0 ? `{ ${properties} }` : null].filter(Boolean).join(' ').trim();\n  } else if ((0,_lexical_mark__WEBPACK_IMPORTED_MODULE_6__.$isMarkNode)(node)) {\n    return `ids: [ ${node.getIDs().join(', ')} ]`;\n  } else if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isParagraphNode)(node)) {\n    const formatText = printTextFormatProperties(node);\n    let paragraphData = formatText !== '' ? `{ ${formatText} }` : '';\n    paragraphData += node.__style ? `(${node.__style})` : '';\n    return paragraphData;\n  } else {\n    return '';\n  }\n}\nfunction printTextFormatProperties(nodeOrSelection) {\n  let str = FORMAT_PREDICATES_PARAGRAPH.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'format: ' + str;\n  }\n  return str;\n}\nfunction printAllTextNodeProperties(node) {\n  return [printFormatProperties(node), printDetailProperties(node), printModeProperties(node), printStateProperties(node)].filter(Boolean).join(', ');\n}\nfunction printAllLinkNodeProperties(node) {\n  return [printTargetProperties(node), printRelProperties(node), printTitleProperties(node), printStateProperties(node)].filter(Boolean).join(', ');\n}\nfunction printDetailProperties(nodeOrSelection) {\n  let str = DETAIL_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'detail: ' + str;\n  }\n  return str;\n}\nfunction printModeProperties(nodeOrSelection) {\n  let str = MODE_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'mode: ' + str;\n  }\n  return str;\n}\nfunction printFormatProperties(nodeOrSelection) {\n  let str = FORMAT_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'format: ' + str;\n  }\n  return str;\n}\nfunction printTargetProperties(node) {\n  let str = node.getTarget();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'target: ' + str;\n  }\n  return str;\n}\nfunction printRelProperties(node) {\n  let str = node.getRel();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'rel: ' + str;\n  }\n  return str;\n}\nfunction printTitleProperties(node) {\n  let str = node.getTitle();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'title: ' + str;\n  }\n  return str;\n}\nfunction printStateProperties(node) {\n  if (!node.__state) {\n    return false;\n  }\n  const states = [];\n  for (const [stateType, value] of node.__state.knownState.entries()) {\n    if (stateType.isEqual(value, stateType.defaultValue)) {\n      continue;\n    }\n    const textValue = JSON.stringify(stateType.unparse(value));\n    states.push(`[${stateType.key}: ${textValue}]`);\n  }\n  let str = states.join(',');\n  if (str !== '') {\n    str = 'state: ' + str;\n  }\n  return str;\n}\nfunction $printSelectedCharsLine({\n  indent,\n  isSelected,\n  node,\n  nodeKeyDisplay,\n  selection,\n  typeDisplay\n}) {\n  // No selection or node is not selected.\n  if (!(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isTextNode)(node) || !(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isRangeSelection)(selection) || !isSelected || (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isElementNode)(node)) {\n    return '';\n  }\n\n  // No selected characters.\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  if (node.getTextContent() === '' || anchor.getNode() === selection.focus.getNode() && anchor.offset === focus.offset) {\n    return '';\n  }\n  const [start, end] = $getSelectionStartEnd(node, selection);\n  if (start === end) {\n    return '';\n  }\n  const selectionLastIndent = indent[indent.length - 1] === SYMBOLS.hasNextSibling ? SYMBOLS.ancestorHasNextSibling : SYMBOLS.ancestorIsLastChild;\n  const indentionChars = [...indent.slice(0, indent.length - 1), selectionLastIndent];\n  const unselectedChars = Array(start + 1).fill(' ');\n  const selectedChars = Array(end - start).fill(SYMBOLS.selectedChar);\n  const paddingLength = typeDisplay.length + 2; // 1 for the space after + 1 for the double quote.\n\n  const nodePrintSpaces = Array(nodeKeyDisplay.length + paddingLength).fill(' ');\n  return [SYMBOLS.selectedLine, indentionChars.join(' '), [...nodePrintSpaces, ...unselectedChars, ...selectedChars].join('')].join(' ') + '\\n';\n}\nfunction printPrettyHTML(str) {\n  const div = document.createElement('div');\n  div.innerHTML = str.trim();\n  return prettifyHTML(div, 0).innerHTML;\n}\nfunction prettifyHTML(node, level) {\n  const indentBefore = new Array(level++ + 1).join('  ');\n  const indentAfter = new Array(level - 1).join('  ');\n  let textNode;\n  for (let i = 0; i < node.children.length; i++) {\n    textNode = document.createTextNode('\\n' + indentBefore);\n    node.insertBefore(textNode, node.children[i]);\n    prettifyHTML(node.children[i], level);\n    if (node.lastElementChild === node.children[i]) {\n      textNode = document.createTextNode('\\n' + indentAfter);\n      node.appendChild(textNode);\n    }\n  }\n  return node;\n}\nfunction $getSelectionStartEnd(node, selection) {\n  const anchorAndFocus = selection.getStartEndPoints();\n  if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isNodeSelection)(selection) || anchorAndFocus === null) {\n    return [-1, -1];\n  }\n  const [anchor, focus] = anchorAndFocus;\n  const textContent = node.getTextContent();\n  const textLength = textContent.length;\n  let start = -1;\n  let end = -1;\n\n  // Only one node is being selected.\n  if (anchor.type === 'text' && focus.type === 'text') {\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (anchorNode === focusNode && node === anchorNode && anchor.offset !== focus.offset) {\n      [start, end] = anchor.offset < focus.offset ? [anchor.offset, focus.offset] : [focus.offset, anchor.offset];\n    } else if (node === anchorNode) {\n      [start, end] = anchorNode.isBefore(focusNode) ? [anchor.offset, textLength] : [0, anchor.offset];\n    } else if (node === focusNode) {\n      [start, end] = focusNode.isBefore(anchorNode) ? [focus.offset, textLength] : [0, focus.offset];\n    } else {\n      // Node is within selection but not the anchor nor focus.\n      [start, end] = [0, textLength];\n    }\n  }\n\n  // Account for non-single width characters.\n  const numNonSingleWidthCharBeforeSelection = (textContent.slice(0, start).match(NON_SINGLE_WIDTH_CHARS_REGEX) || []).length;\n  const numNonSingleWidthCharInSelection = (textContent.slice(start, end).match(NON_SINGLE_WIDTH_CHARS_REGEX) || []).length;\n  return [start + numNonSingleWidthCharBeforeSelection, end + numNonSingleWidthCharBeforeSelection + numNonSingleWidthCharInSelection];\n}\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst LARGE_EDITOR_STATE_SIZE = 1000;\nconst TreeView = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function TreeViewWrapped({\n  treeTypeButtonClassName,\n  timeTravelButtonClassName,\n  timeTravelPanelSliderClassName,\n  timeTravelPanelButtonClassName,\n  viewClassName,\n  timeTravelPanelClassName,\n  editorState,\n  setEditorState,\n  setEditorReadOnly,\n  generateContent,\n  commandsLog = []\n}, ref) {\n  const [timeStampedEditorStates, setTimeStampedEditorStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [content, setContent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  const [timeTravelEnabled, setTimeTravelEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showExportDOM, setShowExportDOM] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const playingIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isLimited, setIsLimited] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showLimited, setShowLimited] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const lastEditorStateRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const lastCommandsLogRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const lastGenerationID = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const generateTree = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(exportDOM => {\n    const myID = ++lastGenerationID.current;\n    generateContent(exportDOM).then(treeText => {\n      if (myID === lastGenerationID.current) {\n        setContent(treeText);\n      }\n    }).catch(err => {\n      if (myID === lastGenerationID.current) {\n        setContent(`Error rendering tree: ${err.message}\\n\\nStack:\\n${err.stack}`);\n      }\n    });\n  }, [generateContent]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!showLimited && editorState._nodeMap.size > LARGE_EDITOR_STATE_SIZE) {\n      setIsLimited(true);\n      if (!showLimited) {\n        return;\n      }\n    }\n\n    // Update view when either editor state changes or new commands are logged\n    const shouldUpdate = lastEditorStateRef.current !== editorState || lastCommandsLogRef.current !== commandsLog;\n    if (shouldUpdate) {\n      // Check if it's a real editor state change\n      const isEditorStateChange = lastEditorStateRef.current !== editorState;\n      lastEditorStateRef.current = editorState;\n      lastCommandsLogRef.current = commandsLog;\n      generateTree(showExportDOM);\n\n      // Only record in time travel if there was an actual editor state change\n      if (!timeTravelEnabled && isEditorStateChange) {\n        setTimeStampedEditorStates(currentEditorStates => [...currentEditorStates, [Date.now(), editorState]]);\n      }\n    }\n  }, [editorState, generateTree, showExportDOM, showLimited, timeTravelEnabled, commandsLog]);\n  const totalEditorStates = timeStampedEditorStates.length;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (isPlaying) {\n      let timeoutId;\n      const play = () => {\n        const currentIndex = playingIndexRef.current;\n        if (currentIndex === totalEditorStates - 1) {\n          setIsPlaying(false);\n          return;\n        }\n        const currentTime = timeStampedEditorStates[currentIndex][0];\n        const nextTime = timeStampedEditorStates[currentIndex + 1][0];\n        const timeDiff = nextTime - currentTime;\n        timeoutId = setTimeout(() => {\n          playingIndexRef.current++;\n          const index = playingIndexRef.current;\n          const input = inputRef.current;\n          if (input !== null) {\n            input.value = String(index);\n          }\n          setEditorState(timeStampedEditorStates[index][1]);\n          play();\n        }, timeDiff);\n      };\n      play();\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [timeStampedEditorStates, isPlaying, totalEditorStates, setEditorState]);\n  const handleExportModeToggleClick = () => {\n    generateTree(!showExportDOM);\n    setShowExportDOM(!showExportDOM);\n  };\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n    className: viewClassName,\n    children: [!showLimited && isLimited ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", {\n        style: {\n          marginRight: 20\n        },\n        children: \"Detected large EditorState, this can impact debugging performance.\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        onClick: () => {\n          setShowLimited(true);\n        },\n        style: {\n          background: 'transparent',\n          border: '1px solid white',\n          color: 'white',\n          cursor: 'pointer',\n          padding: 5\n        },\n        children: \"Show full tree\"\n      })]\n    }) : null, !showLimited ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n      onClick: () => handleExportModeToggleClick(),\n      className: treeTypeButtonClassName,\n      type: \"button\",\n      children: showExportDOM ? 'Tree' : 'Export DOM'\n    }) : null, !timeTravelEnabled && (showLimited || !isLimited) && totalEditorStates > 2 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n      onClick: () => {\n        setEditorReadOnly(true);\n        playingIndexRef.current = totalEditorStates - 1;\n        setTimeTravelEnabled(true);\n      },\n      className: timeTravelButtonClassName,\n      type: \"button\",\n      children: \"Time Travel\"\n    }), (showLimited || !isLimited) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"pre\", {\n      ref: ref,\n      children: content\n    }), timeTravelEnabled && (showLimited || !isLimited) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n      className: timeTravelPanelClassName,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        className: timeTravelPanelButtonClassName,\n        onClick: () => {\n          if (playingIndexRef.current === totalEditorStates - 1) {\n            playingIndexRef.current = 1;\n          }\n          setIsPlaying(!isPlaying);\n        },\n        type: \"button\",\n        children: isPlaying ? 'Pause' : 'Play'\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"input\", {\n        className: timeTravelPanelSliderClassName,\n        ref: inputRef,\n        onChange: event => {\n          const editorStateIndex = Number(event.target.value);\n          const timeStampedEditorState = timeStampedEditorStates[editorStateIndex];\n          if (timeStampedEditorState) {\n            playingIndexRef.current = editorStateIndex;\n            setEditorState(timeStampedEditorState[1]);\n          }\n        },\n        type: \"range\",\n        min: \"1\",\n        max: totalEditorStates - 1\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        className: timeTravelPanelButtonClassName,\n        onClick: () => {\n          setEditorReadOnly(false);\n          const index = timeStampedEditorStates.length - 1;\n          const timeStampedEditorState = timeStampedEditorStates[index];\n          setEditorState(timeStampedEditorState[1]);\n          const input = inputRef.current;\n          if (input !== null) {\n            input.value = String(index);\n          }\n          setTimeTravelEnabled(false);\n          setIsPlaying(false);\n        },\n        type: \"button\",\n        children: \"Exit\"\n      })]\n    })]\n  });\n});\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction registerLexicalCommandLogger(editor, setLoggedCommands) {\n  const unregisterCommandListeners = new Set();\n  let i = 0;\n  for (const [command] of editor._commands) {\n    unregisterCommandListeners.add(editor.registerCommand(command, payload => {\n      setLoggedCommands(state => {\n        i += 1;\n        const newState = [...state];\n        newState.push({\n          index: i,\n          payload,\n          type: command.type ? command.type : 'UNKNOWN'\n        });\n        if (newState.length > 10) {\n          newState.shift();\n        }\n        return newState;\n      });\n      return false;\n    }, lexical__WEBPACK_IMPORTED_MODULE_3__.COMMAND_PRIORITY_CRITICAL));\n  }\n  return () => unregisterCommandListeners.forEach(unregister => unregister());\n}\nfunction useLexicalCommandsLog(editor) {\n  const [loggedCommands, setLoggedCommands] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    return registerLexicalCommandLogger(editor, setLoggedCommands);\n  }, [editor]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => loggedCommands, [loggedCommands]);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxleGljYWwrZGV2dG9vbHMtY29yZUAwLjM1LjBfcmVhY3QtZG9tQDE5LjEuMF9yZWFjdEAxOS4xLjBfX3JlYWN0QDE5LjEuMC9ub2RlX21vZHVsZXMvQGxleGljYWwvZGV2dG9vbHMtY29yZS9MZXhpY2FsRGV2dG9vbHNDb3JlLmRldi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFdUQ7QUFDWDtBQUNBO0FBQ087QUFDOEc7QUFDM0U7QUFDeEM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxxRUFBc0I7QUFDekQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFhO0FBQ25DLGNBQWMsaURBQVE7QUFDdEI7QUFDQSxpQ0FBaUMsUUFBUTtBQUN6QztBQUNBO0FBQ0EsZ0JBQWdCLHlDQUF5QyxFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLGFBQWEsRUFBRSxnREFBZ0Q7QUFDaEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLDJDQUEyQywwREFBaUIsK0NBQStDLGlFQUFpQjtBQUM1SCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sc0JBQXNCLE1BQU0sSUFBSSxRQUFRLEtBQUssYUFBYSxnRUFBZ0U7QUFDMUg7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osdUJBQXVCLGdCQUFnQixR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T0FBTztBQUNQLEtBQUssc0NBQXNDLHNEQUFHO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxxR0FBcUcsc0RBQUc7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSywrQ0FBK0Msc0RBQUc7QUFDdkQ7QUFDQTtBQUNBLEtBQUssb0VBQW9FLHVEQUFJO0FBQzdFO0FBQ0EsOEJBQThCLHNEQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTyxnQkFBZ0Isc0RBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLE9BQU8sZ0JBQWdCLHNEQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLLEVBQUUsOERBQXlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLCtDQUFRO0FBQ3RELEVBQUUsZ0RBQVM7QUFDWDtBQUNBLEdBQUc7QUFDSCxTQUFTLDhDQUFPO0FBQ2hCOztBQUUwRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hYy9TeW5jL3Byb2plY3QvZWNvbW1lcmNlL3Nob3BzYWFzL2h0bWxjb252ZXJ0ZXIvcGF5bG9hZHNhYXMvbm9kZV9tb2R1bGVzLy5wbnBtL0BsZXhpY2FsK2RldnRvb2xzLWNvcmVAMC4zNS4wX3JlYWN0LWRvbUAxOS4xLjBfcmVhY3RAMTkuMS4wX19yZWFjdEAxOS4xLjAvbm9kZV9tb2R1bGVzL0BsZXhpY2FsL2RldnRvb2xzLWNvcmUvTGV4aWNhbERldnRvb2xzQ29yZS5kZXYubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuaW1wb3J0IHsgJGdlbmVyYXRlSHRtbEZyb21Ob2RlcyB9IGZyb20gJ0BsZXhpY2FsL2h0bWwnO1xuaW1wb3J0IHsgJGlzTGlua05vZGUgfSBmcm9tICdAbGV4aWNhbC9saW5rJztcbmltcG9ydCB7ICRpc01hcmtOb2RlIH0gZnJvbSAnQGxleGljYWwvbWFyayc7XG5pbXBvcnQgeyAkaXNUYWJsZVNlbGVjdGlvbiB9IGZyb20gJ0BsZXhpY2FsL3RhYmxlJztcbmltcG9ydCB7ICRnZXRTZWxlY3Rpb24sICRnZXRSb290LCAkaXNSYW5nZVNlbGVjdGlvbiwgJGlzTm9kZVNlbGVjdGlvbiwgJGlzRWxlbWVudE5vZGUsICRpc1RleHROb2RlLCAkaXNQYXJhZ3JhcGhOb2RlLCBDT01NQU5EX1BSSU9SSVRZX0NSSVRJQ0FMIH0gZnJvbSAnbGV4aWNhbCc7XG5pbXBvcnQgeyBmb3J3YXJkUmVmLCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4cywganN4IH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmNvbnN0IE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVQTEFDRU1FTlQgPSBPYmplY3QuZnJlZXplKHtcbiAgJ1xcdCc6ICdcXFxcdCcsXG4gICdcXG4nOiAnXFxcXG4nXG59KTtcbmNvbnN0IE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVHRVggPSBuZXcgUmVnRXhwKE9iamVjdC5rZXlzKE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVQTEFDRU1FTlQpLmpvaW4oJ3wnKSwgJ2cnKTtcbmNvbnN0IFNZTUJPTFMgPSBPYmplY3QuZnJlZXplKHtcbiAgYW5jZXN0b3JIYXNOZXh0U2libGluZzogJ3wnLFxuICBhbmNlc3RvcklzTGFzdENoaWxkOiAnICcsXG4gIGhhc05leHRTaWJsaW5nOiAn4pScJyxcbiAgaXNMYXN0Q2hpbGQ6ICfilJQnLFxuICBzZWxlY3RlZENoYXI6ICdeJyxcbiAgc2VsZWN0ZWRMaW5lOiAnPidcbn0pO1xuY29uc3QgRk9STUFUX1BSRURJQ0FURVMgPSBbbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgnYm9sZCcpICYmICdCb2xkJywgbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgnY29kZScpICYmICdDb2RlJywgbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgnaXRhbGljJykgJiYgJ0l0YWxpYycsIG5vZGUgPT4gbm9kZS5oYXNGb3JtYXQoJ3N0cmlrZXRocm91Z2gnKSAmJiAnU3RyaWtldGhyb3VnaCcsIG5vZGUgPT4gbm9kZS5oYXNGb3JtYXQoJ3N1YnNjcmlwdCcpICYmICdTdWJzY3JpcHQnLCBub2RlID0+IG5vZGUuaGFzRm9ybWF0KCdzdXBlcnNjcmlwdCcpICYmICdTdXBlcnNjcmlwdCcsIG5vZGUgPT4gbm9kZS5oYXNGb3JtYXQoJ3VuZGVybGluZScpICYmICdVbmRlcmxpbmUnLCBub2RlID0+IG5vZGUuaGFzRm9ybWF0KCdoaWdobGlnaHQnKSAmJiAnSGlnaGxpZ2h0J107XG5jb25zdCBGT1JNQVRfUFJFRElDQVRFU19QQVJBR1JBUEggPSBbbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ2JvbGQnKSAmJiAnQm9sZCcsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCdjb2RlJykgJiYgJ0NvZGUnLCBub2RlID0+IG5vZGUuaGFzVGV4dEZvcm1hdCgnaXRhbGljJykgJiYgJ0l0YWxpYycsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCdzdHJpa2V0aHJvdWdoJykgJiYgJ1N0cmlrZXRocm91Z2gnLCBub2RlID0+IG5vZGUuaGFzVGV4dEZvcm1hdCgnc3Vic2NyaXB0JykgJiYgJ1N1YnNjcmlwdCcsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCdzdXBlcnNjcmlwdCcpICYmICdTdXBlcnNjcmlwdCcsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCd1bmRlcmxpbmUnKSAmJiAnVW5kZXJsaW5lJywgbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ2hpZ2hsaWdodCcpICYmICdIaWdobGlnaHQnXTtcbmNvbnN0IERFVEFJTF9QUkVESUNBVEVTID0gW25vZGUgPT4gbm9kZS5pc0RpcmVjdGlvbmxlc3MoKSAmJiAnRGlyZWN0aW9ubGVzcycsIG5vZGUgPT4gbm9kZS5pc1VubWVyZ2VhYmxlKCkgJiYgJ1VubWVyZ2VhYmxlJ107XG5jb25zdCBNT0RFX1BSRURJQ0FURVMgPSBbbm9kZSA9PiBub2RlLmlzVG9rZW4oKSAmJiAnVG9rZW4nLCBub2RlID0+IG5vZGUuaXNTZWdtZW50ZWQoKSAmJiAnU2VnbWVudGVkJ107XG5mdW5jdGlvbiBnZW5lcmF0ZUNvbnRlbnQoZWRpdG9yLCBjb21tYW5kc0xvZywgZXhwb3J0RE9NLCBjdXN0b21QcmludE5vZGUsIG9iZnVzY2F0ZVRleHQgPSBmYWxzZSkge1xuICBjb25zdCBlZGl0b3JTdGF0ZSA9IGVkaXRvci5nZXRFZGl0b3JTdGF0ZSgpO1xuICBjb25zdCBlZGl0b3JDb25maWcgPSBlZGl0b3IuX2NvbmZpZztcbiAgY29uc3QgY29tcG9zaXRpb25LZXkgPSBlZGl0b3IuX2NvbXBvc2l0aW9uS2V5O1xuICBjb25zdCBlZGl0YWJsZSA9IGVkaXRvci5fZWRpdGFibGU7XG4gIGlmIChleHBvcnRET00pIHtcbiAgICBsZXQgaHRtbFN0cmluZyA9ICcnO1xuICAgIGVkaXRvclN0YXRlLnJlYWQoKCkgPT4ge1xuICAgICAgaHRtbFN0cmluZyA9IHByaW50UHJldHR5SFRNTCgkZ2VuZXJhdGVIdG1sRnJvbU5vZGVzKGVkaXRvcikpO1xuICAgIH0pO1xuICAgIHJldHVybiBodG1sU3RyaW5nO1xuICB9XG4gIGxldCByZXMgPSAnIHJvb3RcXG4nO1xuICBjb25zdCBzZWxlY3Rpb25TdHJpbmcgPSBlZGl0b3JTdGF0ZS5yZWFkKCgpID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSAkZ2V0U2VsZWN0aW9uKCk7XG4gICAgdmlzaXRUcmVlKCRnZXRSb290KCksIChub2RlLCBpbmRlbnQpID0+IHtcbiAgICAgIGNvbnN0IG5vZGVLZXkgPSBub2RlLmdldEtleSgpO1xuICAgICAgY29uc3Qgbm9kZUtleURpc3BsYXkgPSBgKCR7bm9kZUtleX0pYDtcbiAgICAgIGNvbnN0IHR5cGVEaXNwbGF5ID0gbm9kZS5nZXRUeXBlKCkgfHwgJyc7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gbm9kZS5pc1NlbGVjdGVkKCk7XG4gICAgICByZXMgKz0gYCR7aXNTZWxlY3RlZCA/IFNZTUJPTFMuc2VsZWN0ZWRMaW5lIDogJyAnfSAke2luZGVudC5qb2luKCcgJyl9ICR7bm9kZUtleURpc3BsYXl9ICR7dHlwZURpc3BsYXl9ICR7cHJpbnROb2RlKG5vZGUsIGN1c3RvbVByaW50Tm9kZSwgb2JmdXNjYXRlVGV4dCl9XFxuYDtcbiAgICAgIHJlcyArPSAkcHJpbnRTZWxlY3RlZENoYXJzTGluZSh7XG4gICAgICAgIGluZGVudCxcbiAgICAgICAgaXNTZWxlY3RlZCxcbiAgICAgICAgbm9kZSxcbiAgICAgICAgbm9kZUtleURpc3BsYXksXG4gICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgdHlwZURpc3BsYXlcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBzZWxlY3Rpb24gPT09IG51bGwgPyAnOiBudWxsJyA6ICRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgPyBwcmludFJhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgOiAkaXNUYWJsZVNlbGVjdGlvbihzZWxlY3Rpb24pID8gcHJpbnRUYWJsZVNlbGVjdGlvbihzZWxlY3Rpb24pIDogcHJpbnROb2RlU2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gIH0pO1xuICByZXMgKz0gJ1xcbiBzZWxlY3Rpb24nICsgc2VsZWN0aW9uU3RyaW5nO1xuICByZXMgKz0gJ1xcblxcbiBjb21tYW5kczonO1xuICBpZiAoY29tbWFuZHNMb2cubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCB7XG4gICAgICBpbmRleCxcbiAgICAgIHR5cGUsXG4gICAgICBwYXlsb2FkXG4gICAgfSBvZiBjb21tYW5kc0xvZykge1xuICAgICAgcmVzICs9IGBcXG4gIOKUlCAke2luZGV4fS4geyB0eXBlOiAke3R5cGV9LCBwYXlsb2FkOiAke3BheWxvYWQgaW5zdGFuY2VvZiBFdmVudCA/IHBheWxvYWQuY29uc3RydWN0b3IubmFtZSA6IHBheWxvYWR9IH1gO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMgKz0gJ1xcbiAg4pSUIE5vbmUgZGlzcGF0Y2hlZC4nO1xuICB9XG4gIGNvbnN0IHtcbiAgICB2ZXJzaW9uXG4gIH0gPSBlZGl0b3IuY29uc3RydWN0b3I7XG4gIHJlcyArPSBgXFxuXFxuIGVkaXRvciR7dmVyc2lvbiA/IGAgKHYke3ZlcnNpb259KWAgOiAnJ306YDtcbiAgcmVzICs9IGBcXG4gIOKUlCBuYW1lc3BhY2UgJHtlZGl0b3JDb25maWcubmFtZXNwYWNlfWA7XG4gIGlmIChjb21wb3NpdGlvbktleSAhPT0gbnVsbCkge1xuICAgIHJlcyArPSBgXFxuICDilJQgY29tcG9zaXRpb25LZXkgJHtjb21wb3NpdGlvbktleX1gO1xuICB9XG4gIHJlcyArPSBgXFxuICDilJQgZWRpdGFibGUgJHtTdHJpbmcoZWRpdGFibGUpfWA7XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBwcmludFJhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikge1xuICBsZXQgcmVzID0gJyc7XG4gIGNvbnN0IGZvcm1hdFRleHQgPSBwcmludEZvcm1hdFByb3BlcnRpZXMoc2VsZWN0aW9uKTtcbiAgcmVzICs9IGA6IHJhbmdlICR7Zm9ybWF0VGV4dCAhPT0gJycgPyBgeyAke2Zvcm1hdFRleHR9IH1gIDogJyd9ICR7c2VsZWN0aW9uLnN0eWxlICE9PSAnJyA/IGB7IHN0eWxlOiAke3NlbGVjdGlvbi5zdHlsZX0gfSBgIDogJyd9YDtcbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGNvbnN0IGFuY2hvck9mZnNldCA9IGFuY2hvci5vZmZzZXQ7XG4gIGNvbnN0IGZvY3VzT2Zmc2V0ID0gZm9jdXMub2Zmc2V0O1xuICByZXMgKz0gYFxcbiAg4pScIGFuY2hvciB7IGtleTogJHthbmNob3Iua2V5fSwgb2Zmc2V0OiAke2FuY2hvck9mZnNldCA9PT0gbnVsbCA/ICdudWxsJyA6IGFuY2hvck9mZnNldH0sIHR5cGU6ICR7YW5jaG9yLnR5cGV9IH1gO1xuICByZXMgKz0gYFxcbiAg4pSUIGZvY3VzIHsga2V5OiAke2ZvY3VzLmtleX0sIG9mZnNldDogJHtmb2N1c09mZnNldCA9PT0gbnVsbCA/ICdudWxsJyA6IGZvY3VzT2Zmc2V0fSwgdHlwZTogJHtmb2N1cy50eXBlfSB9YDtcbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHByaW50Tm9kZVNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgaWYgKCEkaXNOb2RlU2VsZWN0aW9uKHNlbGVjdGlvbikpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIGA6IG5vZGVcXG4gIOKUlCBbJHtBcnJheS5mcm9tKHNlbGVjdGlvbi5fbm9kZXMpLmpvaW4oJywgJyl9XWA7XG59XG5mdW5jdGlvbiBwcmludFRhYmxlU2VsZWN0aW9uKHNlbGVjdGlvbikge1xuICByZXR1cm4gYDogdGFibGVcXG4gIOKUlCB7IHRhYmxlOiAke3NlbGVjdGlvbi50YWJsZUtleX0sIGFuY2hvckNlbGw6ICR7c2VsZWN0aW9uLmFuY2hvci5rZXl9LCBmb2N1c0NlbGw6ICR7c2VsZWN0aW9uLmZvY3VzLmtleX0gfWA7XG59XG5mdW5jdGlvbiB2aXNpdFRyZWUoY3VycmVudE5vZGUsIHZpc2l0b3IsIGluZGVudCA9IFtdKSB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBjdXJyZW50Tm9kZS5nZXRDaGlsZHJlbigpO1xuICBjb25zdCBjaGlsZE5vZGVzTGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gIGNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGROb2RlLCBpKSA9PiB7XG4gICAgdmlzaXRvcihjaGlsZE5vZGUsIGluZGVudC5jb25jYXQoaSA9PT0gY2hpbGROb2Rlc0xlbmd0aCAtIDEgPyBTWU1CT0xTLmlzTGFzdENoaWxkIDogU1lNQk9MUy5oYXNOZXh0U2libGluZykpO1xuICAgIGlmICgkaXNFbGVtZW50Tm9kZShjaGlsZE5vZGUpKSB7XG4gICAgICB2aXNpdFRyZWUoY2hpbGROb2RlLCB2aXNpdG9yLCBpbmRlbnQuY29uY2F0KGkgPT09IGNoaWxkTm9kZXNMZW5ndGggLSAxID8gU1lNQk9MUy5hbmNlc3RvcklzTGFzdENoaWxkIDogU1lNQk9MUy5hbmNlc3Rvckhhc05leHRTaWJsaW5nKSk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZSh0ZXh0LCBvYmZ1c2NhdGVUZXh0ID0gZmFsc2UpIHtcbiAgY29uc3QgdGV4dFRvUHJpbnQgPSBPYmplY3QuZW50cmllcyhOT05fU0lOR0xFX1dJRFRIX0NIQVJTX1JFUExBQ0VNRU5UKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiBhY2MucmVwbGFjZShuZXcgUmVnRXhwKGtleSwgJ2cnKSwgU3RyaW5nKHZhbHVlKSksIHRleHQpO1xuICBpZiAob2JmdXNjYXRlVGV4dCkge1xuICAgIHJldHVybiB0ZXh0VG9QcmludC5yZXBsYWNlKC9bXlxcc10vZywgJyonKTtcbiAgfVxuICByZXR1cm4gdGV4dFRvUHJpbnQ7XG59XG5mdW5jdGlvbiBwcmludE5vZGUobm9kZSwgY3VzdG9tUHJpbnROb2RlLCBvYmZ1c2NhdGVUZXh0ID0gZmFsc2UpIHtcbiAgY29uc3QgY3VzdG9tUHJpbnQgPSBjdXN0b21QcmludE5vZGUgPyBjdXN0b21QcmludE5vZGUobm9kZSwgb2JmdXNjYXRlVGV4dCkgOiB1bmRlZmluZWQ7XG4gIGlmIChjdXN0b21QcmludCAhPT0gdW5kZWZpbmVkICYmIGN1c3RvbVByaW50Lmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gY3VzdG9tUHJpbnQ7XG4gIH1cbiAgaWYgKCRpc1RleHROb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgdGV4dCA9IG5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICBjb25zdCB0aXRsZSA9IHRleHQubGVuZ3RoID09PSAwID8gJyhlbXB0eSknIDogYFwiJHtub3JtYWxpemUodGV4dCwgb2JmdXNjYXRlVGV4dCl9XCJgO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBwcmludEFsbFRleHROb2RlUHJvcGVydGllcyhub2RlKTtcbiAgICByZXR1cm4gW3RpdGxlLCBwcm9wZXJ0aWVzLmxlbmd0aCAhPT0gMCA/IGB7ICR7cHJvcGVydGllc30gfWAgOiBudWxsXS5maWx0ZXIoQm9vbGVhbikuam9pbignICcpLnRyaW0oKTtcbiAgfSBlbHNlIGlmICgkaXNMaW5rTm9kZShub2RlKSkge1xuICAgIGNvbnN0IGxpbmsgPSBub2RlLmdldFVSTCgpO1xuICAgIGNvbnN0IHRpdGxlID0gbGluay5sZW5ndGggPT09IDAgPyAnKGVtcHR5KScgOiBgXCIke25vcm1hbGl6ZShsaW5rLCBvYmZ1c2NhdGVUZXh0KX1cImA7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IHByaW50QWxsTGlua05vZGVQcm9wZXJ0aWVzKG5vZGUpO1xuICAgIHJldHVybiBbdGl0bGUsIHByb3BlcnRpZXMubGVuZ3RoICE9PSAwID8gYHsgJHtwcm9wZXJ0aWVzfSB9YCA6IG51bGxdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJykudHJpbSgpO1xuICB9IGVsc2UgaWYgKCRpc01hcmtOb2RlKG5vZGUpKSB7XG4gICAgcmV0dXJuIGBpZHM6IFsgJHtub2RlLmdldElEcygpLmpvaW4oJywgJyl9IF1gO1xuICB9IGVsc2UgaWYgKCRpc1BhcmFncmFwaE5vZGUobm9kZSkpIHtcbiAgICBjb25zdCBmb3JtYXRUZXh0ID0gcHJpbnRUZXh0Rm9ybWF0UHJvcGVydGllcyhub2RlKTtcbiAgICBsZXQgcGFyYWdyYXBoRGF0YSA9IGZvcm1hdFRleHQgIT09ICcnID8gYHsgJHtmb3JtYXRUZXh0fSB9YCA6ICcnO1xuICAgIHBhcmFncmFwaERhdGEgKz0gbm9kZS5fX3N0eWxlID8gYCgke25vZGUuX19zdHlsZX0pYCA6ICcnO1xuICAgIHJldHVybiBwYXJhZ3JhcGhEYXRhO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuZnVuY3Rpb24gcHJpbnRUZXh0Rm9ybWF0UHJvcGVydGllcyhub2RlT3JTZWxlY3Rpb24pIHtcbiAgbGV0IHN0ciA9IEZPUk1BVF9QUkVESUNBVEVTX1BBUkFHUkFQSC5tYXAocHJlZGljYXRlID0+IHByZWRpY2F0ZShub2RlT3JTZWxlY3Rpb24pKS5maWx0ZXIoQm9vbGVhbikuam9pbignLCAnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICBpZiAoc3RyICE9PSAnJykge1xuICAgIHN0ciA9ICdmb3JtYXQ6ICcgKyBzdHI7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIHByaW50QWxsVGV4dE5vZGVQcm9wZXJ0aWVzKG5vZGUpIHtcbiAgcmV0dXJuIFtwcmludEZvcm1hdFByb3BlcnRpZXMobm9kZSksIHByaW50RGV0YWlsUHJvcGVydGllcyhub2RlKSwgcHJpbnRNb2RlUHJvcGVydGllcyhub2RlKSwgcHJpbnRTdGF0ZVByb3BlcnRpZXMobm9kZSldLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpO1xufVxuZnVuY3Rpb24gcHJpbnRBbGxMaW5rTm9kZVByb3BlcnRpZXMobm9kZSkge1xuICByZXR1cm4gW3ByaW50VGFyZ2V0UHJvcGVydGllcyhub2RlKSwgcHJpbnRSZWxQcm9wZXJ0aWVzKG5vZGUpLCBwcmludFRpdGxlUHJvcGVydGllcyhub2RlKSwgcHJpbnRTdGF0ZVByb3BlcnRpZXMobm9kZSldLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpO1xufVxuZnVuY3Rpb24gcHJpbnREZXRhaWxQcm9wZXJ0aWVzKG5vZGVPclNlbGVjdGlvbikge1xuICBsZXQgc3RyID0gREVUQUlMX1BSRURJQ0FURVMubWFwKHByZWRpY2F0ZSA9PiBwcmVkaWNhdGUobm9kZU9yU2VsZWN0aW9uKSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgaWYgKHN0ciAhPT0gJycpIHtcbiAgICBzdHIgPSAnZGV0YWlsOiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBwcmludE1vZGVQcm9wZXJ0aWVzKG5vZGVPclNlbGVjdGlvbikge1xuICBsZXQgc3RyID0gTU9ERV9QUkVESUNBVEVTLm1hcChwcmVkaWNhdGUgPT4gcHJlZGljYXRlKG5vZGVPclNlbGVjdGlvbikpLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gIGlmIChzdHIgIT09ICcnKSB7XG4gICAgc3RyID0gJ21vZGU6ICcgKyBzdHI7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIHByaW50Rm9ybWF0UHJvcGVydGllcyhub2RlT3JTZWxlY3Rpb24pIHtcbiAgbGV0IHN0ciA9IEZPUk1BVF9QUkVESUNBVEVTLm1hcChwcmVkaWNhdGUgPT4gcHJlZGljYXRlKG5vZGVPclNlbGVjdGlvbikpLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gIGlmIChzdHIgIT09ICcnKSB7XG4gICAgc3RyID0gJ2Zvcm1hdDogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRUYXJnZXRQcm9wZXJ0aWVzKG5vZGUpIHtcbiAgbGV0IHN0ciA9IG5vZGUuZ2V0VGFyZ2V0KCk7XG4gIC8vIFRPRE8gRml4IG51bGxpc2ggb24gTGlua05vZGVcbiAgaWYgKHN0ciAhPSBudWxsKSB7XG4gICAgc3RyID0gJ3RhcmdldDogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRSZWxQcm9wZXJ0aWVzKG5vZGUpIHtcbiAgbGV0IHN0ciA9IG5vZGUuZ2V0UmVsKCk7XG4gIC8vIFRPRE8gRml4IG51bGxpc2ggb24gTGlua05vZGVcbiAgaWYgKHN0ciAhPSBudWxsKSB7XG4gICAgc3RyID0gJ3JlbDogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRUaXRsZVByb3BlcnRpZXMobm9kZSkge1xuICBsZXQgc3RyID0gbm9kZS5nZXRUaXRsZSgpO1xuICAvLyBUT0RPIEZpeCBudWxsaXNoIG9uIExpbmtOb2RlXG4gIGlmIChzdHIgIT0gbnVsbCkge1xuICAgIHN0ciA9ICd0aXRsZTogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRTdGF0ZVByb3BlcnRpZXMobm9kZSkge1xuICBpZiAoIW5vZGUuX19zdGF0ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzdGF0ZXMgPSBbXTtcbiAgZm9yIChjb25zdCBbc3RhdGVUeXBlLCB2YWx1ZV0gb2Ygbm9kZS5fX3N0YXRlLmtub3duU3RhdGUuZW50cmllcygpKSB7XG4gICAgaWYgKHN0YXRlVHlwZS5pc0VxdWFsKHZhbHVlLCBzdGF0ZVR5cGUuZGVmYXVsdFZhbHVlKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHRleHRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHN0YXRlVHlwZS51bnBhcnNlKHZhbHVlKSk7XG4gICAgc3RhdGVzLnB1c2goYFske3N0YXRlVHlwZS5rZXl9OiAke3RleHRWYWx1ZX1dYCk7XG4gIH1cbiAgbGV0IHN0ciA9IHN0YXRlcy5qb2luKCcsJyk7XG4gIGlmIChzdHIgIT09ICcnKSB7XG4gICAgc3RyID0gJ3N0YXRlOiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiAkcHJpbnRTZWxlY3RlZENoYXJzTGluZSh7XG4gIGluZGVudCxcbiAgaXNTZWxlY3RlZCxcbiAgbm9kZSxcbiAgbm9kZUtleURpc3BsYXksXG4gIHNlbGVjdGlvbixcbiAgdHlwZURpc3BsYXlcbn0pIHtcbiAgLy8gTm8gc2VsZWN0aW9uIG9yIG5vZGUgaXMgbm90IHNlbGVjdGVkLlxuICBpZiAoISRpc1RleHROb2RlKG5vZGUpIHx8ICEkaXNSYW5nZVNlbGVjdGlvbihzZWxlY3Rpb24pIHx8ICFpc1NlbGVjdGVkIHx8ICRpc0VsZW1lbnROb2RlKG5vZGUpKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLy8gTm8gc2VsZWN0ZWQgY2hhcmFjdGVycy5cbiAgY29uc3QgYW5jaG9yID0gc2VsZWN0aW9uLmFuY2hvcjtcbiAgY29uc3QgZm9jdXMgPSBzZWxlY3Rpb24uZm9jdXM7XG4gIGlmIChub2RlLmdldFRleHRDb250ZW50KCkgPT09ICcnIHx8IGFuY2hvci5nZXROb2RlKCkgPT09IHNlbGVjdGlvbi5mb2N1cy5nZXROb2RlKCkgJiYgYW5jaG9yLm9mZnNldCA9PT0gZm9jdXMub2Zmc2V0KSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGNvbnN0IFtzdGFydCwgZW5kXSA9ICRnZXRTZWxlY3Rpb25TdGFydEVuZChub2RlLCBzZWxlY3Rpb24pO1xuICBpZiAoc3RhcnQgPT09IGVuZCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBjb25zdCBzZWxlY3Rpb25MYXN0SW5kZW50ID0gaW5kZW50W2luZGVudC5sZW5ndGggLSAxXSA9PT0gU1lNQk9MUy5oYXNOZXh0U2libGluZyA/IFNZTUJPTFMuYW5jZXN0b3JIYXNOZXh0U2libGluZyA6IFNZTUJPTFMuYW5jZXN0b3JJc0xhc3RDaGlsZDtcbiAgY29uc3QgaW5kZW50aW9uQ2hhcnMgPSBbLi4uaW5kZW50LnNsaWNlKDAsIGluZGVudC5sZW5ndGggLSAxKSwgc2VsZWN0aW9uTGFzdEluZGVudF07XG4gIGNvbnN0IHVuc2VsZWN0ZWRDaGFycyA9IEFycmF5KHN0YXJ0ICsgMSkuZmlsbCgnICcpO1xuICBjb25zdCBzZWxlY3RlZENoYXJzID0gQXJyYXkoZW5kIC0gc3RhcnQpLmZpbGwoU1lNQk9MUy5zZWxlY3RlZENoYXIpO1xuICBjb25zdCBwYWRkaW5nTGVuZ3RoID0gdHlwZURpc3BsYXkubGVuZ3RoICsgMjsgLy8gMSBmb3IgdGhlIHNwYWNlIGFmdGVyICsgMSBmb3IgdGhlIGRvdWJsZSBxdW90ZS5cblxuICBjb25zdCBub2RlUHJpbnRTcGFjZXMgPSBBcnJheShub2RlS2V5RGlzcGxheS5sZW5ndGggKyBwYWRkaW5nTGVuZ3RoKS5maWxsKCcgJyk7XG4gIHJldHVybiBbU1lNQk9MUy5zZWxlY3RlZExpbmUsIGluZGVudGlvbkNoYXJzLmpvaW4oJyAnKSwgWy4uLm5vZGVQcmludFNwYWNlcywgLi4udW5zZWxlY3RlZENoYXJzLCAuLi5zZWxlY3RlZENoYXJzXS5qb2luKCcnKV0uam9pbignICcpICsgJ1xcbic7XG59XG5mdW5jdGlvbiBwcmludFByZXR0eUhUTUwoc3RyKSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuaW5uZXJIVE1MID0gc3RyLnRyaW0oKTtcbiAgcmV0dXJuIHByZXR0aWZ5SFRNTChkaXYsIDApLmlubmVySFRNTDtcbn1cbmZ1bmN0aW9uIHByZXR0aWZ5SFRNTChub2RlLCBsZXZlbCkge1xuICBjb25zdCBpbmRlbnRCZWZvcmUgPSBuZXcgQXJyYXkobGV2ZWwrKyArIDEpLmpvaW4oJyAgJyk7XG4gIGNvbnN0IGluZGVudEFmdGVyID0gbmV3IEFycmF5KGxldmVsIC0gMSkuam9pbignICAnKTtcbiAgbGV0IHRleHROb2RlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcXG4nICsgaW5kZW50QmVmb3JlKTtcbiAgICBub2RlLmluc2VydEJlZm9yZSh0ZXh0Tm9kZSwgbm9kZS5jaGlsZHJlbltpXSk7XG4gICAgcHJldHRpZnlIVE1MKG5vZGUuY2hpbGRyZW5baV0sIGxldmVsKTtcbiAgICBpZiAobm9kZS5sYXN0RWxlbWVudENoaWxkID09PSBub2RlLmNoaWxkcmVuW2ldKSB7XG4gICAgICB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcXG4nICsgaW5kZW50QWZ0ZXIpO1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gJGdldFNlbGVjdGlvblN0YXJ0RW5kKG5vZGUsIHNlbGVjdGlvbikge1xuICBjb25zdCBhbmNob3JBbmRGb2N1cyA9IHNlbGVjdGlvbi5nZXRTdGFydEVuZFBvaW50cygpO1xuICBpZiAoJGlzTm9kZVNlbGVjdGlvbihzZWxlY3Rpb24pIHx8IGFuY2hvckFuZEZvY3VzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFstMSwgLTFdO1xuICB9XG4gIGNvbnN0IFthbmNob3IsIGZvY3VzXSA9IGFuY2hvckFuZEZvY3VzO1xuICBjb25zdCB0ZXh0Q29udGVudCA9IG5vZGUuZ2V0VGV4dENvbnRlbnQoKTtcbiAgY29uc3QgdGV4dExlbmd0aCA9IHRleHRDb250ZW50Lmxlbmd0aDtcbiAgbGV0IHN0YXJ0ID0gLTE7XG4gIGxldCBlbmQgPSAtMTtcblxuICAvLyBPbmx5IG9uZSBub2RlIGlzIGJlaW5nIHNlbGVjdGVkLlxuICBpZiAoYW5jaG9yLnR5cGUgPT09ICd0ZXh0JyAmJiBmb2N1cy50eXBlID09PSAndGV4dCcpIHtcbiAgICBjb25zdCBhbmNob3JOb2RlID0gYW5jaG9yLmdldE5vZGUoKTtcbiAgICBjb25zdCBmb2N1c05vZGUgPSBmb2N1cy5nZXROb2RlKCk7XG4gICAgaWYgKGFuY2hvck5vZGUgPT09IGZvY3VzTm9kZSAmJiBub2RlID09PSBhbmNob3JOb2RlICYmIGFuY2hvci5vZmZzZXQgIT09IGZvY3VzLm9mZnNldCkge1xuICAgICAgW3N0YXJ0LCBlbmRdID0gYW5jaG9yLm9mZnNldCA8IGZvY3VzLm9mZnNldCA/IFthbmNob3Iub2Zmc2V0LCBmb2N1cy5vZmZzZXRdIDogW2ZvY3VzLm9mZnNldCwgYW5jaG9yLm9mZnNldF07XG4gICAgfSBlbHNlIGlmIChub2RlID09PSBhbmNob3JOb2RlKSB7XG4gICAgICBbc3RhcnQsIGVuZF0gPSBhbmNob3JOb2RlLmlzQmVmb3JlKGZvY3VzTm9kZSkgPyBbYW5jaG9yLm9mZnNldCwgdGV4dExlbmd0aF0gOiBbMCwgYW5jaG9yLm9mZnNldF07XG4gICAgfSBlbHNlIGlmIChub2RlID09PSBmb2N1c05vZGUpIHtcbiAgICAgIFtzdGFydCwgZW5kXSA9IGZvY3VzTm9kZS5pc0JlZm9yZShhbmNob3JOb2RlKSA/IFtmb2N1cy5vZmZzZXQsIHRleHRMZW5ndGhdIDogWzAsIGZvY3VzLm9mZnNldF07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vZGUgaXMgd2l0aGluIHNlbGVjdGlvbiBidXQgbm90IHRoZSBhbmNob3Igbm9yIGZvY3VzLlxuICAgICAgW3N0YXJ0LCBlbmRdID0gWzAsIHRleHRMZW5ndGhdO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFjY291bnQgZm9yIG5vbi1zaW5nbGUgd2lkdGggY2hhcmFjdGVycy5cbiAgY29uc3QgbnVtTm9uU2luZ2xlV2lkdGhDaGFyQmVmb3JlU2VsZWN0aW9uID0gKHRleHRDb250ZW50LnNsaWNlKDAsIHN0YXJ0KS5tYXRjaChOT05fU0lOR0xFX1dJRFRIX0NIQVJTX1JFR0VYKSB8fCBbXSkubGVuZ3RoO1xuICBjb25zdCBudW1Ob25TaW5nbGVXaWR0aENoYXJJblNlbGVjdGlvbiA9ICh0ZXh0Q29udGVudC5zbGljZShzdGFydCwgZW5kKS5tYXRjaChOT05fU0lOR0xFX1dJRFRIX0NIQVJTX1JFR0VYKSB8fCBbXSkubGVuZ3RoO1xuICByZXR1cm4gW3N0YXJ0ICsgbnVtTm9uU2luZ2xlV2lkdGhDaGFyQmVmb3JlU2VsZWN0aW9uLCBlbmQgKyBudW1Ob25TaW5nbGVXaWR0aENoYXJCZWZvcmVTZWxlY3Rpb24gKyBudW1Ob25TaW5nbGVXaWR0aENoYXJJblNlbGVjdGlvbl07XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuY29uc3QgTEFSR0VfRURJVE9SX1NUQVRFX1NJWkUgPSAxMDAwO1xuY29uc3QgVHJlZVZpZXcgPSAvKiNfX1BVUkVfXyovZm9yd2FyZFJlZihmdW5jdGlvbiBUcmVlVmlld1dyYXBwZWQoe1xuICB0cmVlVHlwZUJ1dHRvbkNsYXNzTmFtZSxcbiAgdGltZVRyYXZlbEJ1dHRvbkNsYXNzTmFtZSxcbiAgdGltZVRyYXZlbFBhbmVsU2xpZGVyQ2xhc3NOYW1lLFxuICB0aW1lVHJhdmVsUGFuZWxCdXR0b25DbGFzc05hbWUsXG4gIHZpZXdDbGFzc05hbWUsXG4gIHRpbWVUcmF2ZWxQYW5lbENsYXNzTmFtZSxcbiAgZWRpdG9yU3RhdGUsXG4gIHNldEVkaXRvclN0YXRlLFxuICBzZXRFZGl0b3JSZWFkT25seSxcbiAgZ2VuZXJhdGVDb250ZW50LFxuICBjb21tYW5kc0xvZyA9IFtdXG59LCByZWYpIHtcbiAgY29uc3QgW3RpbWVTdGFtcGVkRWRpdG9yU3RhdGVzLCBzZXRUaW1lU3RhbXBlZEVkaXRvclN0YXRlc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtjb250ZW50LCBzZXRDb250ZW50XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3RpbWVUcmF2ZWxFbmFibGVkLCBzZXRUaW1lVHJhdmVsRW5hYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RXhwb3J0RE9NLCBzZXRTaG93RXhwb3J0RE9NXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcGxheWluZ0luZGV4UmVmID0gdXNlUmVmKDApO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTGltaXRlZCwgc2V0SXNMaW1pdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dMaW1pdGVkLCBzZXRTaG93TGltaXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGxhc3RFZGl0b3JTdGF0ZVJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBsYXN0Q29tbWFuZHNMb2dSZWYgPSB1c2VSZWYoW10pO1xuICBjb25zdCBsYXN0R2VuZXJhdGlvbklEID0gdXNlUmVmKDApO1xuICBjb25zdCBnZW5lcmF0ZVRyZWUgPSB1c2VDYWxsYmFjayhleHBvcnRET00gPT4ge1xuICAgIGNvbnN0IG15SUQgPSArK2xhc3RHZW5lcmF0aW9uSUQuY3VycmVudDtcbiAgICBnZW5lcmF0ZUNvbnRlbnQoZXhwb3J0RE9NKS50aGVuKHRyZWVUZXh0ID0+IHtcbiAgICAgIGlmIChteUlEID09PSBsYXN0R2VuZXJhdGlvbklELmN1cnJlbnQpIHtcbiAgICAgICAgc2V0Q29udGVudCh0cmVlVGV4dCk7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgIGlmIChteUlEID09PSBsYXN0R2VuZXJhdGlvbklELmN1cnJlbnQpIHtcbiAgICAgICAgc2V0Q29udGVudChgRXJyb3IgcmVuZGVyaW5nIHRyZWU6ICR7ZXJyLm1lc3NhZ2V9XFxuXFxuU3RhY2s6XFxuJHtlcnIuc3RhY2t9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtnZW5lcmF0ZUNvbnRlbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXNob3dMaW1pdGVkICYmIGVkaXRvclN0YXRlLl9ub2RlTWFwLnNpemUgPiBMQVJHRV9FRElUT1JfU1RBVEVfU0laRSkge1xuICAgICAgc2V0SXNMaW1pdGVkKHRydWUpO1xuICAgICAgaWYgKCFzaG93TGltaXRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHZpZXcgd2hlbiBlaXRoZXIgZWRpdG9yIHN0YXRlIGNoYW5nZXMgb3IgbmV3IGNvbW1hbmRzIGFyZSBsb2dnZWRcbiAgICBjb25zdCBzaG91bGRVcGRhdGUgPSBsYXN0RWRpdG9yU3RhdGVSZWYuY3VycmVudCAhPT0gZWRpdG9yU3RhdGUgfHwgbGFzdENvbW1hbmRzTG9nUmVmLmN1cnJlbnQgIT09IGNvbW1hbmRzTG9nO1xuICAgIGlmIChzaG91bGRVcGRhdGUpIHtcbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSByZWFsIGVkaXRvciBzdGF0ZSBjaGFuZ2VcbiAgICAgIGNvbnN0IGlzRWRpdG9yU3RhdGVDaGFuZ2UgPSBsYXN0RWRpdG9yU3RhdGVSZWYuY3VycmVudCAhPT0gZWRpdG9yU3RhdGU7XG4gICAgICBsYXN0RWRpdG9yU3RhdGVSZWYuY3VycmVudCA9IGVkaXRvclN0YXRlO1xuICAgICAgbGFzdENvbW1hbmRzTG9nUmVmLmN1cnJlbnQgPSBjb21tYW5kc0xvZztcbiAgICAgIGdlbmVyYXRlVHJlZShzaG93RXhwb3J0RE9NKTtcblxuICAgICAgLy8gT25seSByZWNvcmQgaW4gdGltZSB0cmF2ZWwgaWYgdGhlcmUgd2FzIGFuIGFjdHVhbCBlZGl0b3Igc3RhdGUgY2hhbmdlXG4gICAgICBpZiAoIXRpbWVUcmF2ZWxFbmFibGVkICYmIGlzRWRpdG9yU3RhdGVDaGFuZ2UpIHtcbiAgICAgICAgc2V0VGltZVN0YW1wZWRFZGl0b3JTdGF0ZXMoY3VycmVudEVkaXRvclN0YXRlcyA9PiBbLi4uY3VycmVudEVkaXRvclN0YXRlcywgW0RhdGUubm93KCksIGVkaXRvclN0YXRlXV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2VkaXRvclN0YXRlLCBnZW5lcmF0ZVRyZWUsIHNob3dFeHBvcnRET00sIHNob3dMaW1pdGVkLCB0aW1lVHJhdmVsRW5hYmxlZCwgY29tbWFuZHNMb2ddKTtcbiAgY29uc3QgdG90YWxFZGl0b3JTdGF0ZXMgPSB0aW1lU3RhbXBlZEVkaXRvclN0YXRlcy5sZW5ndGg7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzUGxheWluZykge1xuICAgICAgbGV0IHRpbWVvdXRJZDtcbiAgICAgIGNvbnN0IHBsYXkgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHBsYXlpbmdJbmRleFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSB0b3RhbEVkaXRvclN0YXRlcyAtIDEpIHtcbiAgICAgICAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzW2N1cnJlbnRJbmRleF1bMF07XG4gICAgICAgIGNvbnN0IG5leHRUaW1lID0gdGltZVN0YW1wZWRFZGl0b3JTdGF0ZXNbY3VycmVudEluZGV4ICsgMV1bMF07XG4gICAgICAgIGNvbnN0IHRpbWVEaWZmID0gbmV4dFRpbWUgLSBjdXJyZW50VGltZTtcbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcGxheWluZ0luZGV4UmVmLmN1cnJlbnQrKztcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBsYXlpbmdJbmRleFJlZi5jdXJyZW50O1xuICAgICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICAgICAgICBpZiAoaW5wdXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gU3RyaW5nKGluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0RWRpdG9yU3RhdGUodGltZVN0YW1wZWRFZGl0b3JTdGF0ZXNbaW5kZXhdWzFdKTtcbiAgICAgICAgICBwbGF5KCk7XG4gICAgICAgIH0sIHRpbWVEaWZmKTtcbiAgICAgIH07XG4gICAgICBwbGF5KCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbdGltZVN0YW1wZWRFZGl0b3JTdGF0ZXMsIGlzUGxheWluZywgdG90YWxFZGl0b3JTdGF0ZXMsIHNldEVkaXRvclN0YXRlXSk7XG4gIGNvbnN0IGhhbmRsZUV4cG9ydE1vZGVUb2dnbGVDbGljayA9ICgpID0+IHtcbiAgICBnZW5lcmF0ZVRyZWUoIXNob3dFeHBvcnRET00pO1xuICAgIHNldFNob3dFeHBvcnRET00oIXNob3dFeHBvcnRET00pO1xuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogdmlld0NsYXNzTmFtZSxcbiAgICBjaGlsZHJlbjogWyFzaG93TGltaXRlZCAmJiBpc0xpbWl0ZWQgPyAvKiNfX1BVUkVfXyovanN4cyhcImRpdlwiLCB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBwYWRkaW5nOiAyMFxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChcInNwYW5cIiwge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG1hcmdpblJpZ2h0OiAyMFxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogXCJEZXRlY3RlZCBsYXJnZSBFZGl0b3JTdGF0ZSwgdGhpcyBjYW4gaW1wYWN0IGRlYnVnZ2luZyBwZXJmb3JtYW5jZS5cIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goXCJidXR0b25cIiwge1xuICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgc2V0U2hvd0xpbWl0ZWQodHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgd2hpdGUnLFxuICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgIHBhZGRpbmc6IDVcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFwiU2hvdyBmdWxsIHRyZWVcIlxuICAgICAgfSldXG4gICAgfSkgOiBudWxsLCAhc2hvd0xpbWl0ZWQgPyAvKiNfX1BVUkVfXyovanN4KFwiYnV0dG9uXCIsIHtcbiAgICAgIG9uQ2xpY2s6ICgpID0+IGhhbmRsZUV4cG9ydE1vZGVUb2dnbGVDbGljaygpLFxuICAgICAgY2xhc3NOYW1lOiB0cmVlVHlwZUJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICBjaGlsZHJlbjogc2hvd0V4cG9ydERPTSA/ICdUcmVlJyA6ICdFeHBvcnQgRE9NJ1xuICAgIH0pIDogbnVsbCwgIXRpbWVUcmF2ZWxFbmFibGVkICYmIChzaG93TGltaXRlZCB8fCAhaXNMaW1pdGVkKSAmJiB0b3RhbEVkaXRvclN0YXRlcyA+IDIgJiYgLyojX19QVVJFX18qL2pzeChcImJ1dHRvblwiLCB7XG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHNldEVkaXRvclJlYWRPbmx5KHRydWUpO1xuICAgICAgICBwbGF5aW5nSW5kZXhSZWYuY3VycmVudCA9IHRvdGFsRWRpdG9yU3RhdGVzIC0gMTtcbiAgICAgICAgc2V0VGltZVRyYXZlbEVuYWJsZWQodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgY2xhc3NOYW1lOiB0aW1lVHJhdmVsQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGNoaWxkcmVuOiBcIlRpbWUgVHJhdmVsXCJcbiAgICB9KSwgKHNob3dMaW1pdGVkIHx8ICFpc0xpbWl0ZWQpICYmIC8qI19fUFVSRV9fKi9qc3goXCJwcmVcIiwge1xuICAgICAgcmVmOiByZWYsXG4gICAgICBjaGlsZHJlbjogY29udGVudFxuICAgIH0pLCB0aW1lVHJhdmVsRW5hYmxlZCAmJiAoc2hvd0xpbWl0ZWQgfHwgIWlzTGltaXRlZCkgJiYgLyojX19QVVJFX18qL2pzeHMoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiB0aW1lVHJhdmVsUGFuZWxDbGFzc05hbWUsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJidXR0b25cIiwge1xuICAgICAgICBjbGFzc05hbWU6IHRpbWVUcmF2ZWxQYW5lbEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgIGlmIChwbGF5aW5nSW5kZXhSZWYuY3VycmVudCA9PT0gdG90YWxFZGl0b3JTdGF0ZXMgLSAxKSB7XG4gICAgICAgICAgICBwbGF5aW5nSW5kZXhSZWYuY3VycmVudCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldElzUGxheWluZyghaXNQbGF5aW5nKTtcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgY2hpbGRyZW46IGlzUGxheWluZyA/ICdQYXVzZScgOiAnUGxheSdcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFwiaW5wdXRcIiwge1xuICAgICAgICBjbGFzc05hbWU6IHRpbWVUcmF2ZWxQYW5lbFNsaWRlckNsYXNzTmFtZSxcbiAgICAgICAgcmVmOiBpbnB1dFJlZixcbiAgICAgICAgb25DaGFuZ2U6IGV2ZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBlZGl0b3JTdGF0ZUluZGV4ID0gTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgY29uc3QgdGltZVN0YW1wZWRFZGl0b3JTdGF0ZSA9IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzW2VkaXRvclN0YXRlSW5kZXhdO1xuICAgICAgICAgIGlmICh0aW1lU3RhbXBlZEVkaXRvclN0YXRlKSB7XG4gICAgICAgICAgICBwbGF5aW5nSW5kZXhSZWYuY3VycmVudCA9IGVkaXRvclN0YXRlSW5kZXg7XG4gICAgICAgICAgICBzZXRFZGl0b3JTdGF0ZSh0aW1lU3RhbXBlZEVkaXRvclN0YXRlWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IFwicmFuZ2VcIixcbiAgICAgICAgbWluOiBcIjFcIixcbiAgICAgICAgbWF4OiB0b3RhbEVkaXRvclN0YXRlcyAtIDFcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiB0aW1lVHJhdmVsUGFuZWxCdXR0b25DbGFzc05hbWUsXG4gICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBzZXRFZGl0b3JSZWFkT25seShmYWxzZSk7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aW1lU3RhbXBlZEVkaXRvclN0YXRlcy5sZW5ndGggLSAxO1xuICAgICAgICAgIGNvbnN0IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGUgPSB0aW1lU3RhbXBlZEVkaXRvclN0YXRlc1tpbmRleF07XG4gICAgICAgICAgc2V0RWRpdG9yU3RhdGUodGltZVN0YW1wZWRFZGl0b3JTdGF0ZVsxXSk7XG4gICAgICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgICAgICAgIGlmIChpbnB1dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBTdHJpbmcoaW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRUaW1lVHJhdmVsRW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgY2hpbGRyZW46IFwiRXhpdFwiXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59KTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5mdW5jdGlvbiByZWdpc3RlckxleGljYWxDb21tYW5kTG9nZ2VyKGVkaXRvciwgc2V0TG9nZ2VkQ29tbWFuZHMpIHtcbiAgY29uc3QgdW5yZWdpc3RlckNvbW1hbmRMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gIGxldCBpID0gMDtcbiAgZm9yIChjb25zdCBbY29tbWFuZF0gb2YgZWRpdG9yLl9jb21tYW5kcykge1xuICAgIHVucmVnaXN0ZXJDb21tYW5kTGlzdGVuZXJzLmFkZChlZGl0b3IucmVnaXN0ZXJDb21tYW5kKGNvbW1hbmQsIHBheWxvYWQgPT4ge1xuICAgICAgc2V0TG9nZ2VkQ29tbWFuZHMoc3RhdGUgPT4ge1xuICAgICAgICBpICs9IDE7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gWy4uLnN0YXRlXTtcbiAgICAgICAgbmV3U3RhdGUucHVzaCh7XG4gICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICB0eXBlOiBjb21tYW5kLnR5cGUgPyBjb21tYW5kLnR5cGUgOiAnVU5LTk9XTidcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChuZXdTdGF0ZS5sZW5ndGggPiAxMCkge1xuICAgICAgICAgIG5ld1N0YXRlLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSwgQ09NTUFORF9QUklPUklUWV9DUklUSUNBTCkpO1xuICB9XG4gIHJldHVybiAoKSA9PiB1bnJlZ2lzdGVyQ29tbWFuZExpc3RlbmVycy5mb3JFYWNoKHVucmVnaXN0ZXIgPT4gdW5yZWdpc3RlcigpKTtcbn1cbmZ1bmN0aW9uIHVzZUxleGljYWxDb21tYW5kc0xvZyhlZGl0b3IpIHtcbiAgY29uc3QgW2xvZ2dlZENvbW1hbmRzLCBzZXRMb2dnZWRDb21tYW5kc10gPSB1c2VTdGF0ZShbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuIHJlZ2lzdGVyTGV4aWNhbENvbW1hbmRMb2dnZXIoZWRpdG9yLCBzZXRMb2dnZWRDb21tYW5kcyk7XG4gIH0sIFtlZGl0b3JdKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gbG9nZ2VkQ29tbWFuZHMsIFtsb2dnZWRDb21tYW5kc10pO1xufVxuXG5leHBvcnQgeyBUcmVlVmlldywgZ2VuZXJhdGVDb250ZW50LCByZWdpc3RlckxleGljYWxDb21tYW5kTG9nZ2VyLCB1c2VMZXhpY2FsQ29tbWFuZHNMb2cgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs\n");

/***/ })

};
;